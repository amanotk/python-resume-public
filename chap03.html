

<!doctype html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>3. 制御構造と関数 &#8212; FortranユーザーのためのPython入門</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="4. 対話型の実行方法" href="chap04.html" />
    <link rel="prev" title="2. Pythonの基本" href="chap02.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="chap04.html" title="4. 対話型の実行方法"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="chap02.html" title="2. Pythonの基本"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FortranユーザーのためのPython入門</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. 制御構造と関数</a><ul>
<li><a class="reference internal" href="#if">3.1. 条件分岐( <code class="docutils literal notranslate"><span class="pre">if</span></code> )</a></li>
<li><a class="reference internal" href="#for">3.2. 反復処理( <code class="docutils literal notranslate"><span class="pre">for</span></code> )</a></li>
<li><a class="reference internal" href="#while">3.3. 反復処理( <code class="docutils literal notranslate"><span class="pre">while</span></code> )</a></li>
<li><a class="reference internal" href="#id4">3.4. 複雑な反復処理</a></li>
<li><a class="reference internal" href="#id6">3.5. 関数</a><ul>
<li><a class="reference internal" href="#id7">3.5.1. 簡単な例</a></li>
<li><a class="reference internal" href="#id8">3.5.2. 定義</a></li>
<li><a class="reference internal" href="#id10">3.5.3. 返値</a></li>
<li><a class="reference internal" href="#id12">3.5.4. 変数のスコープ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">3.6. 第3章 演習課題</a><ul>
<li><a class="reference internal" href="#id15">3.6.1. 課題1</a></li>
<li><a class="reference internal" href="#id16">3.6.2. 課題2</a></li>
<li><a class="reference internal" href="#id17">3.6.3. 課題3</a></li>
<li><a class="reference internal" href="#id18">3.6.4. 課題4</a></li>
<li><a class="reference internal" href="#id19">3.6.5. 課題5</a></li>
<li><a class="reference internal" href="#id20">3.6.6. 課題6</a></li>
<li><a class="reference internal" href="#id21">3.6.7. 課題7</a></li>
<li><a class="reference internal" href="#id22">3.6.8. 課題8</a></li>
<li><a class="reference internal" href="#id23">3.6.9. 課題9</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="chap02.html"
                        title="前の章へ"><span class="section-number">2. </span>Pythonの基本</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="chap04.html"
                        title="次の章へ"><span class="section-number">4. </span>対話型の実行方法</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/chap03.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1><a class="toc-backref" href="#id43"><span class="section-number">3. </span>制御構造と関数</a><a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>ここでは <code class="docutils literal notranslate"><span class="pre">if</span></code> による条件分岐， <code class="docutils literal notranslate"><span class="pre">for</span></code> や <code class="docutils literal notranslate"><span class="pre">while</span></code> による反復処理，さらには関数の基本的な使い方についても学ぼう．</p>
<blockquote>
<div><p>サンプルプログラム</p>
<ul class="simple">
<li><p><a class="reference internal" href="chap03_sample1_py.html"><span class="doc">sample1.py</span></a> : <code class="docutils literal notranslate"><span class="pre">if</span></code> による条件分岐</p></li>
<li><p><a class="reference internal" href="chap03_sample2_py.html"><span class="doc">sample2.py</span></a> : <code class="docutils literal notranslate"><span class="pre">for</span></code> による反復処理</p></li>
<li><p><a class="reference internal" href="chap03_sample3_py.html"><span class="doc">sample3.py</span></a> : <code class="docutils literal notranslate"><span class="pre">while</span></code> による反復処理</p></li>
<li><p><a class="reference internal" href="chap03_sample4_py.html"><span class="doc">sample4.py</span></a> : 複雑な反復処理</p></li>
<li><p><a class="reference internal" href="chap03_sample5_py.html"><span class="doc">sample5.py</span></a> : 関数の使い方1</p></li>
<li><p><a class="reference internal" href="chap03_sample6_py.html"><span class="doc">sample6.py</span></a> : 関数の使い方2</p></li>
<li><p><a class="reference internal" href="chap03_sample7_py.html"><span class="doc">sample7.py</span></a> : 関数の使い方3</p></li>
</ul>
</div></blockquote>
<div class="contents topic" id="id2">
<p class="topic-title">この章の内容</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id1" id="id43">制御構造と関数</a></p>
<ul>
<li><p><a class="reference internal" href="#if" id="id44">条件分岐( <code class="docutils literal notranslate"><span class="pre">if</span></code> )</a></p></li>
<li><p><a class="reference internal" href="#for" id="id45">反復処理( <code class="docutils literal notranslate"><span class="pre">for</span></code> )</a></p></li>
<li><p><a class="reference internal" href="#while" id="id46">反復処理( <code class="docutils literal notranslate"><span class="pre">while</span></code> )</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id47">複雑な反復処理</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id48">関数</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id49">第3章 演習課題</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="if">
<h2><a class="toc-backref" href="#id44"><span class="section-number">3.1. </span>条件分岐( <code class="docutils literal notranslate"><span class="pre">if</span></code> )</a><a class="headerlink" href="#if" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pythonでも基本的な考え方は他の多くのプログラミング言語と同じで，なんらかの値の真偽に応じて処理の流れを分岐する．例えば <code class="docutils literal notranslate"><span class="pre">status</span></code> という変数の真偽に応じて処理を分岐するには</p>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample1_py.html"><span class="doc">sample1.py</span></a> 抜粋</span><a class="headerlink" href="#id29" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># ifによる分岐</span>
<span class="k">if</span> <span class="n">status</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;status is True&#39;</span><span class="p">)</span>  <span class="c1"># インデントが１段下がる</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;status is False&#39;</span><span class="p">)</span> <span class="c1"># ここも１段下がる</span>
</pre></div>
</td></tr></table></div>
</div>
<p>のように記述すればよい．ここでインデントが構文ブロックの区切りであったことを思い出して欲しい． <code class="docutils literal notranslate"><span class="pre">if</span></code> に限らず至るところでインデントが必要になるので注意しよう．</p>
<p>なお <code class="docutils literal notranslate"><span class="pre">else</span></code> 節は必要なければ省略することが可能である．CやFortranと異なり，条件式の部分にカッコが必要ないことに注意しよう．（ただしカッコがあっても文法的には誤りではない．）さらに， <code class="docutils literal notranslate"><span class="pre">if</span></code> を入れ子にするなどのより細かい制御の例として以下を見てみよう．</p>
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample1_py.html"><span class="doc">sample1.py</span></a> 抜粋</span><a class="headerlink" href="#id30" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;** A little more complicated example ***&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">a</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a = &#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
    <span class="c1"># ifを入れ子にする</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a + b &gt; c&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a + b &lt; c&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">==</span> <span class="n">c</span><span class="p">:</span>
        <span class="c1"># さらに入れ子にする</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a + b = c and c &gt;= 0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a + b = c and c &lt;  0&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># passを使って「何もしない」ことを明示することもできる</span>
        <span class="k">pass</span>
<span class="c1"># トップレベルのifに対応するelseは省略</span>
</pre></div>
</td></tr></table></div>
</div>
<p>なお46行目の <code class="docutils literal notranslate"><span class="pre">pass</span></code> は「何もしない」という意味の文である． <code class="docutils literal notranslate"><span class="pre">else</span></code> 節は省略できるので，わざわざここに <code class="docutils literal notranslate"><span class="pre">pass</span></code> は使う必要はないのだが，場合によっては「何もしない」ことを明示しておくことでプログラムが理解しやすくなることもある．</p>
<p>ここで分岐に使う条件式についてもコメントしておこう．Fortranでは条件式は真偽値(<code class="docutils literal notranslate"><span class="pre">logical</span></code> 型の変数，または <code class="docutils literal notranslate"><span class="pre">.true.</span></code> ， <code class="docutils literal notranslate"><span class="pre">.false.</span></code> のいずれか)に限られていた．それに対して，Pythonの場合はCに近くなっている．すなわち，Python組み込みのbool型である <code class="docutils literal notranslate"><span class="pre">True</span></code> や <code class="docutils literal notranslate"><span class="pre">False</span></code> （これらはPythonの予約済みキーワードで大文字小文字は区別される）だけでなく，任意の型の変数を使うことが出来る．詳細は省くが，とりあえずはCと同様に整数型では <code class="docutils literal notranslate"><span class="pre">0</span></code> が偽とみなされ，それ以外は真とみなされるとおぼえておけばよいだろう．また複雑な条件判定には論理演算子である <code class="docutils literal notranslate"><span class="pre">and</span></code> ， <code class="docutils literal notranslate"><span class="pre">or</span></code> ， <code class="docutils literal notranslate"><span class="pre">not</span></code> を組合わせることになる．以下のテーブルには条件判定によく使われる演算子およびその組み合わせの代表的な例を示す．なお，PythonはCやFortranよりも演算子が多い(例えば <code class="docutils literal notranslate"><span class="pre">is</span></code> 演算子)のだが，ここではそれには触れないことにする．</p>
<table class="colwidths-given docutils align-default" id="id31" style="width: 80%">
<caption><span class="caption-text">論理演算子</span><a class="headerlink" href="#id31" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Python</p></th>
<th class="head"><p>C</p></th>
<th class="head"><p>Fortran</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;=</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;=</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;=</span> <span class="pre">B</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;</span> <span class="pre">B</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;=</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;=</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;=</span> <span class="pre">B</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">==</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">==</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">==</span> <span class="pre">B</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">!=</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">!=</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">/=</span> <span class="pre">B</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span> <span class="pre">and</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">C</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span> <span class="pre">&amp;&amp;</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">C</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span> <span class="pre">.and.</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">C</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span> <span class="pre">or</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">C</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span> <span class="pre">||</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">C</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span> <span class="pre">.or.</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">C</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">!</span> <span class="pre">(A</span> <span class="pre">&gt;</span> <span class="pre">B)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.not.</span> <span class="pre">A</span> <span class="pre">&gt;</span> <span class="pre">B</span></code></p></td>
</tr>
</tbody>
</table>
<p>以下は論理演算子を使って様々な条件を組み合わせた例である．演算子の組み合わせにはあらかじめ決められた優先順位に応じて順次評価されるが，カッコで明示的に示したほうが分かりやすい．</p>
<div class="literal-block-wrapper docutils container" id="id32">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample1_py.html"><span class="doc">sample1.py</span></a> 抜粋</span><a class="headerlink" href="#id32" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>52
53
54
55
56
57
58
59
60
61</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;** Use logical operators for complex conditionals ***&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a is smaller than both b and c&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span> <span class="ow">or</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a is smaller than either b or c&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">==</span> <span class="n">c</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;example of complex conditional&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>ちなみにPythonにはCの <code class="docutils literal notranslate"><span class="pre">switch</span></code> ，Fortranの <code class="docutils literal notranslate"><span class="pre">select</span></code> に対応する構文は存在しないので， <code class="docutils literal notranslate"><span class="pre">if</span></code> と <code class="docutils literal notranslate"><span class="pre">elif</span></code> で地道に条件判定をつないでいくことになる．</p>
</div>
<div class="section" id="for">
<h2><a class="toc-backref" href="#id45"><span class="section-number">3.2. </span>反復処理( <code class="docutils literal notranslate"><span class="pre">for</span></code> )</a><a class="headerlink" href="#for" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pythonにおける反復処理（ループ）の最も基本的な形は以下のようなものである．</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample2_py.html"><span class="doc">sample2.py</span></a> 抜粋</span><a class="headerlink" href="#id33" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>これを実行すると0, 1, 2, 3, 4が順に出力される．もう少し細かい制御をするのであれば</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">increment</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>のようになる．これによって，ループ変数 <code class="docutils literal notranslate"><span class="pre">i</span></code> が <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">=</span> <span class="pre">start</span></code> から <code class="docutils literal notranslate"><span class="pre">increment</span></code> ずつ変化しながら <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">stop</span></code> を満たす限りループの中身が実行さる．ここで <code class="docutils literal notranslate"><span class="pre">start</span></code> ， <code class="docutils literal notranslate"><span class="pre">stop</span></code> ， <code class="docutils literal notranslate"><span class="pre">increment</span></code> は全て整数（または整数型の変数）である必要がある．</p>
<p>これはCなら</p>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">stop</span> <span class="p">;</span><span class="n">increment</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Fortranなら</p>
<div class="highlight-fortran notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">do </span><span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">,</span> <span class="k">stop</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">increment</span>
  <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="n">i</span>
<span class="k">end do</span>
</pre></div>
</td></tr></table></div>
<p>に対応する．なお <code class="docutils literal notranslate"><span class="pre">range(5)</span></code> のように1つしか数値を与えなかった場合は，与えられた数値は上記の <code class="docutils literal notranslate"><span class="pre">stop</span></code> と解釈され， <code class="docutils literal notranslate"><span class="pre">start</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">increment</span> <span class="pre">=</span> <span class="pre">1</span></code> が指定されたものとみなす．</p>
<p>このようにPythonの <code class="docutils literal notranslate"><span class="pre">for</span></code> ループはCのそれと非常に似通っており，またFortranの <code class="docutils literal notranslate"><span class="pre">do</span></code> ループとも細かい違いを除けば同じように使うことが出来るので，まずはこの使い方が理解できていれば問題ない<a class="footnote-reference brackets" href="#id24" id="id3">1</a>．</p>
<p>当然ながら，以下のように入れ子にすることで多重ループにすることも可能である．</p>
<div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample2_py.html"><span class="doc">sample2.py</span></a> 抜粋</span><a class="headerlink" href="#id34" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i = &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;, j = &#39;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="s1">&#39;, i*j = &#39;</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="while">
<h2><a class="toc-backref" href="#id46"><span class="section-number">3.3. </span>反復処理( <code class="docutils literal notranslate"><span class="pre">while</span></code> )</a><a class="headerlink" href="#while" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code> を使って <code class="docutils literal notranslate"><span class="pre">for</span></code> の場合と同様に0, 1, 2, 3, 4を出力するループは以下のように書くことができる．</p>
<div class="literal-block-wrapper docutils container" id="id35">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample3_py.html"><span class="doc">sample3.py</span></a> 抜粋</span><a class="headerlink" href="#id35" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
</div>
<p>ただし <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">+=</span> <span class="pre">1</span></code> は <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">=</span> <span class="pre">i</span> <span class="pre">+</span> <span class="pre">1</span></code> と同じ，また <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">-=</span> <span class="pre">1</span></code> であれば <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">=</span> <span class="pre">i</span> <span class="pre">-</span> <span class="pre">1</span></code> と同じ意味である．これらの文法はCと同じであるがFortranにはない書き方である．（ただしインクリメント演算子 <code class="docutils literal notranslate"><span class="pre">++</span></code> やデクリメント演算子 <code class="docutils literal notranslate"><span class="pre">--</span></code> はPythonには存在しない．）</p>
<p>この例では <code class="docutils literal notranslate"><span class="pre">for</span></code> と基本的に同じ動作をするものであるが， <code class="docutils literal notranslate"><span class="pre">while</span></code> はループの終了判定に任意の条件式を用いることができるため，あらかじめ回数の決まっていないループの実行など，より細かい制御を行うことができる．例えば変数 <code class="docutils literal notranslate"><span class="pre">x</span></code> の値が十分小さくなるまで反復計算をするには</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1.0e-10</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x is not small enough&#39;</span><span class="p">)</span>
    <span class="c1"># xがゼロに近づくまで何かの計算をする</span>
</pre></div>
</td></tr></table></div>
<p>のような処理を行なうことになる．この例もCなら</p>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span> <span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1.0e-10</span> <span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 何かの計算</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Fortranなら</p>
<div class="highlight-fortran notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kt">real</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="kd">::</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="k">do while</span><span class="p">(</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">1.0e-10</span> <span class="p">)</span>
  <span class="c">! 何かの計算</span>
<span class="k">end do</span>
</pre></div>
</td></tr></table></div>
<p>以下はテイラー展開の公式を持ちいて， <span class="math notranslate nohighlight">\(sin(x)\)</span> の値が組み込み関数で求められる値（真の値）に十分近づくまで反復計算をする例である．</p>
<div class="literal-block-wrapper docutils container" id="id36">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample3_py.html"><span class="doc">sample3.py</span></a> 抜粋</span><a class="headerlink" href="#id36" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># テイラー展開の公式でsin(x)の近似値が真の値に十分近づくまで計算する</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">x</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">x</span>
<span class="n">ytrue</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i = &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39; --- sin(x) = &#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="k">while</span> <span class="nb">abs</span><span class="p">((</span><span class="n">ytrue</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">ytrue</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1.0e-10</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span> <span class="p">((</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">a</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i = &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39; --- sin(x) = &#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;approximated = &#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;exact        = &#39;</span><span class="p">,</span> <span class="n">ytrue</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rel. error   = &#39;</span><span class="p">,</span> <span class="nb">abs</span><span class="p">((</span><span class="n">ytrue</span><span class="o">-</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">ytrue</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div>
<p>この部分の実行結果は以下のようになる．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python sample3.py
<span class="nv">i</span> <span class="o">=</span>  <span class="m">1</span>  --- sin<span class="o">(</span>x<span class="o">)</span> <span class="o">=</span>  <span class="m">0</span>.2
<span class="nv">i</span> <span class="o">=</span>  <span class="m">3</span>  --- sin<span class="o">(</span>x<span class="o">)</span> <span class="o">=</span>  <span class="m">0</span>.19866666666666669
<span class="nv">i</span> <span class="o">=</span>  <span class="m">5</span>  --- sin<span class="o">(</span>x<span class="o">)</span> <span class="o">=</span>  <span class="m">0</span>.19866933333333336
<span class="nv">i</span> <span class="o">=</span>  <span class="m">7</span>  --- sin<span class="o">(</span>x<span class="o">)</span> <span class="o">=</span>  <span class="m">0</span>.19866933079365082
<span class="nv">approximated</span> <span class="o">=</span>  <span class="m">0</span>.19866933079365082
<span class="nv">exact</span>        <span class="o">=</span>  <span class="m">0</span>.19866933079506122
rel. <span class="nv">error</span>   <span class="o">=</span>  <span class="m">7</span>.0992315183418576e-12
</pre></div>
</td></tr></table></div>
<p>このような場合は繰り返しの回数が事前には分からないので， <code class="docutils literal notranslate"><span class="pre">for</span></code> を使うよりも <code class="docutils literal notranslate"><span class="pre">while</span></code> を使う方が素直に処理を記述することができる．</p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id47"><span class="section-number">3.4. </span>複雑な反復処理</a><a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> ， <code class="docutils literal notranslate"><span class="pre">while</span></code> のいずれも <code class="docutils literal notranslate"><span class="pre">continue</span></code> や <code class="docutils literal notranslate"><span class="pre">break</span></code> で，より細かいループの制御を行なうことができる<a class="footnote-reference brackets" href="#id25" id="id5">2</a>．使い方はCのそれと同じである．Fortranでは <code class="docutils literal notranslate"><span class="pre">continue</span></code> は <code class="docutils literal notranslate"><span class="pre">cycle</span></code> ， <code class="docutils literal notranslate"><span class="pre">break</span></code> は <code class="docutils literal notranslate"><span class="pre">exit</span></code> と同じ意味である．</p>
<p>以下の例は <code class="docutils literal notranslate"><span class="pre">condition1</span></code> が満たされたときに「処理1」を， <code class="docutils literal notranslate"><span class="pre">condition2</span></code> が満たされたときに「処理2」を，どちらも満たされなかったときには「処理3」を実行する．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">if</span>   <span class="n">condition1</span><span class="p">:</span>
        <span class="c1"># 処理1</span>
        <span class="k">break</span>
    <span class="k">elif</span> <span class="n">condition2</span><span class="p">:</span>
        <span class="c1"># 処理2</span>
        <span class="k">continue</span>
    <span class="c1"># 処理3</span>
</pre></div>
</td></tr></table></div>
<p>以下の例は <code class="docutils literal notranslate"><span class="pre">while</span></code> ループで <code class="docutils literal notranslate"><span class="pre">continue</span></code> や <code class="docutils literal notranslate"><span class="pre">break</span></code> を使う例である．</p>
<div class="literal-block-wrapper docutils container" id="id37">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample4_py.html"><span class="doc">sample4.py</span></a> 抜粋</span><a class="headerlink" href="#id37" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span>   <span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Multiple of 2 --- &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">elif</span> <span class="n">i</span><span class="o">%</span><span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Multiple of 3 --- &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">elif</span> <span class="n">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Multiple of 5 --- &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">elif</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exit&#39;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Not a multiple of 2, 3, 5 --- &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>実行結果が以下のようになることは明らかであろう．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python sample4.py
Multiple of <span class="m">2</span> ---  <span class="m">2</span>
Multiple of <span class="m">3</span> ---  <span class="m">3</span>
Multiple of <span class="m">2</span> ---  <span class="m">4</span>
Multiple of <span class="m">5</span> ---  <span class="m">5</span>
Multiple of <span class="m">2</span> ---  <span class="m">6</span>
Not a multiple of <span class="m">2</span>, <span class="m">3</span>, <span class="m">5</span> ---  <span class="m">7</span>
Multiple of <span class="m">2</span> ---  <span class="m">8</span>
Multiple of <span class="m">3</span> ---  <span class="m">9</span>
Multiple of <span class="m">2</span> ---  <span class="m">10</span>
Exit
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id48"><span class="section-number">3.5. </span>関数</a><a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>複雑でまとまった処理を関数としてあらかじめ定義しておくことで，それを様々な場所から呼び出して使うことができて便利である．関数の詳細にはは触れずに，まずは最も基本的な使い方だけを身につけよう．</p>
<div class="section" id="id7">
<h3><span class="section-number">3.5.1. </span>簡単な例<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>まずは <a class="reference internal" href="chap03_sample5_py.html"><span class="doc">sample5.py</span></a> を見てみよう．</p>
<div class="literal-block-wrapper docutils container" id="id38">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample5_py.html"><span class="doc">sample5.py</span></a></span><a class="headerlink" href="#id38" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># 関数定義</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">x</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1"># 関数呼び出し</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;square of &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39; is &#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>ここで5-6行目が関数の定義である．ここでは与えられた引数の2乗を計算し，その値を返す <code class="docutils literal notranslate"><span class="pre">square</span></code> という関数を定義している．9行目がこの関数の呼び出しであり，引数 <code class="docutils literal notranslate"><span class="pre">x</span></code> の2乗を計算した返値を変数 <code class="docutils literal notranslate"><span class="pre">y</span></code> に代入している．実行結果は以下のようになるだろう．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python sample1.py
square of  <span class="m">2</span>.0  is  <span class="m">4</span>.0
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id8">
<h3><span class="section-number">3.5.2. </span>定義<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Pythonにおける関数定義は以下のように <code class="docutils literal notranslate"><span class="pre">def</span></code> を用いて行えばよい．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">関数名</span><span class="p">(</span><span class="n">引数1</span><span class="p">,</span> <span class="n">引数2</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="n">関数内の処理</span><span class="p">(</span><span class="n">インデントに注意</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>ここでもインデントによって関数定義ブロックとそれ以外を区別していることに注意しよう． <code class="docutils literal notranslate"><span class="pre">def</span></code> の次の行のインデントが終わるまでが関数定義とみなされる．先ほどの例 <code class="docutils literal notranslate"><span class="pre">square</span></code> では引数は一つであったが，複数の場合はカンマ <code class="docutils literal notranslate"><span class="pre">,</span></code> で区切って並べればよい．これらが関数への入力となる<a class="footnote-reference brackets" href="#id26" id="id9">3</a>．</p>
<p>関数の定義位置には注意が必要である．Pythonはコンパイル型の言語ではないため，上から順に実行され，実行時に各行が評価される．したがって， <strong>関数定義は呼び出しよりも必ず前にされていなければならない</strong> のである．ただし，これはあくまで実行時の順序であってソースコード上での位置(行数)を意味するものではない．以下の例を見てみよう．</p>
<div class="literal-block-wrapper docutils container" id="id39">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample6_py.html"><span class="doc">sample6.py</span></a></span><a class="headerlink" href="#id39" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># 以下の呼び出しはエラー(この時点ではhelloは定義されていない)</span>
<span class="c1">#hello1()</span>

<span class="k">def</span> <span class="nf">hello2</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">hello1</span><span class="p">()</span> <span class="c1"># 実行時にhello1が定義済みであればOK</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I am&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="c1"># 以下の呼び出しもエラー(この時点ではhello2が呼び出すhello1は定義されていない)</span>
<span class="c1">#hello2(&#39;John&#39;)</span>

<span class="k">def</span> <span class="nf">hello1</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>

<span class="n">hello1</span><span class="p">()</span>
<span class="n">hello2</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>コメントアウトされている5行目の <code class="docutils literal notranslate"><span class="pre">hello1</span></code> ，12行目の <code class="docutils literal notranslate"><span class="pre">hello2</span></code> の呼び出しはどちらもれエラーとなる．5行目は，この時点で <code class="docutils literal notranslate"><span class="pre">hello1</span></code> が定義されていないので明らかである．一方で12行目については，この時点で <code class="docutils literal notranslate"><span class="pre">hello2</span></code> が定義されているので一見問題ないように見えるが， <code class="docutils literal notranslate"><span class="pre">hello2</span></code> の内部(8行目)で呼び出される <code class="docutils literal notranslate"><span class="pre">hello1</span></code> がまだ定義されていないのでエラーになるのである．</p>
</div>
<div class="section" id="id10">
<h3><span class="section-number">3.5.3. </span>返値<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>関数から呼び出し元に制御を戻すときには <code class="docutils literal notranslate"><span class="pre">return</span></code> を用いる． <code class="docutils literal notranslate"><span class="pre">return</span></code> には関数の返値を指定することもできるが，省略することもできる．このときはデフォルトで <code class="docutils literal notranslate"><span class="pre">None</span></code> を返す<a class="footnote-reference brackets" href="#id27" id="id11">4</a>．なお， <code class="docutils literal notranslate"><span class="pre">return</span></code> がなくても関数定義ブロックの最後まで到達したときには呼び出し元に制御が戻り， <code class="docutils literal notranslate"><span class="pre">None</span></code> が返値となる．Fortranでは関数とサブルーチンが区別されているが，Pythonではサブルーチンは存在せず， <code class="docutils literal notranslate"><span class="pre">None</span></code> を返す関数がFortranのサブルーチンに相当すると考えておけばよいだろう．</p>
</div>
<div class="section" id="id12">
<h3><span class="section-number">3.5.4. </span>変数のスコープ<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>関数の中では自由に変数を定義して使うことができる．例えば以下の例をみてみよう．</p>
<div class="literal-block-wrapper docutils container" id="id40">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample7_py.html"><span class="doc">sample7.py</span></a> 抜粋</span><a class="headerlink" href="#id40" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># approximation of exp(x) via taylor expansion up to order n</span>
<span class="k">def</span> <span class="nf">exp_taylor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">c</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">f</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">/=</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">+=</span> <span class="n">c</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span>
</pre></div>
</td></tr></table></div>
</div>
<p>この関数 <code class="docutils literal notranslate"><span class="pre">exp_taylor</span></code> はテイラー展開の公式を <code class="docutils literal notranslate"><span class="pre">n</span></code> 次まで用いて <code class="docutils literal notranslate"><span class="pre">exp(x)</span></code> の近似値を求める．ここで8行目や9行目のように変数を定義して用いている．これらの変数はローカル変数と呼ばれ，この関数の内部でのみ有効な変数である．すなわちこの関数の外で <code class="docutils literal notranslate"><span class="pre">c</span></code> や <code class="docutils literal notranslate"><span class="pre">f</span></code> という変数は(これとは別に定義しない限り)定義されない．もし関数の外で同じ名前の変数を定義して用いたとしても，それらはこの関数内の変数とは全く無関係である．</p>
<p>一方で，関数の外で定義された変数に関数内からアクセスしたいこともあるかもしれない．例えば，以下の関数 <code class="docutils literal notranslate"><span class="pre">fibonacci</span></code> は呼ばれるたびにフィボナッチ数列を返す関数である．</p>
<div class="literal-block-wrapper docutils container" id="id41">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="chap03_sample7_py.html"><span class="doc">sample7.py</span></a> 抜粋</span><a class="headerlink" href="#id41" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># global variables for fibonacci</span>
<span class="n">a</span> <span class="o">=-</span><span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">fibonacci</span><span class="p">():</span>
    <span class="c1"># a and b refer to the global variables</span>
    <span class="k">global</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">c</span>
    <span class="k">return</span> <span class="n">c</span>
</pre></div>
</td></tr></table></div>
</div>
<p>では <code class="docutils literal notranslate"><span class="pre">a</span></code> ， <code class="docutils literal notranslate"><span class="pre">b</span></code> という変数は関数の外(トップレベル)で定義された変数であり，これらに以前の数列の値を保持している．このような変数をグローバル変数と呼ぶ．関数 <code class="docutils literal notranslate"><span class="pre">fibonacci</span></code> からこれらの変数にアクセスするには22行目のように <code class="docutils literal notranslate"><span class="pre">global</span></code> を用いて，グローバル変数を用いることを明示する．この例では <code class="docutils literal notranslate"><span class="pre">a</span></code> および <code class="docutils literal notranslate"><span class="pre">b</span></code> は関数内で値が更新されているが，これによってグローバル変数の値も更新される．</p>
<p>このように関数内では基本的に関数内部でのみ有効なローカル変数を用い，グローバル変数へのアクセスが必要なときのみ，それを <code class="docutils literal notranslate"><span class="pre">global</span></code> によって明示すればよい<a class="footnote-reference brackets" href="#id28" id="id13">5</a>．ただし，グローバル変数は気をつけて使わないとバグの原因となりやすいため推奨できない．引数を使って明示的に値を渡すか，場合によってはクラスを用いて実装する方がよいことが多い．</p>
</div>
</div>
<div class="section" id="id14">
<h2><a class="toc-backref" href="#id49"><span class="section-number">3.6. </span>第3章 演習課題</a><a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id15">
<h3><span class="section-number">3.6.1. </span>課題1<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>サンプルプログラムを実行して動作を確認せよ．</p>
</div>
<div class="section" id="id16">
<h3><span class="section-number">3.6.2. </span>課題2<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>標準入力から2つの整数( <span class="math notranslate nohighlight">\(n, m\)</span> とする)を読み込み，その大小を比較するプログラムを作成せよ．例えば <span class="math notranslate nohighlight">\(n = 1, m = 2\)</span> なら以下のように <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">is</span> <span class="pre">smaller</span> <span class="pre">than</span> <span class="pre">2</span></code> と表示する．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python kadai2.py
Input n : <span class="m">1</span>         <span class="c1"># キーボード入力</span>
Input m : <span class="m">2</span>         <span class="c1"># キーボード入力</span>
<span class="m">1</span> is smaller than <span class="m">2</span>
</pre></div>
</td></tr></table></div>
<p>同様に <span class="math notranslate nohighlight">\(n = 2, m = 1\)</span> なら <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">is</span> <span class="pre">larger</span> <span class="pre">than</span> <span class="pre">1</span></code>, <span class="math notranslate nohighlight">\(n = m = 1\)</span> なら <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">is</span> <span class="pre">equal</span> <span class="pre">to</span> <span class="pre">1</span></code> などと表示するものとする．</p>
</div>
<div class="section" id="id17">
<h3><span class="section-number">3.6.3. </span>課題3<a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><span class="math notranslate nohighlight">\(0^\circ\)</span> から <span class="math notranslate nohighlight">\(180^\circ\)</span> まで <span class="math notranslate nohighlight">\(10^\circ\)</span> 刻みの <span class="math notranslate nohighlight">\(\theta\)</span> および， <span class="math notranslate nohighlight">\(\sin \theta\)</span>, <span class="math notranslate nohighlight">\(\cos \theta\)</span> を標準出力に表示するプログラムを作成せよ(以下のように各 <span class="math notranslate nohighlight">\(\theta\)</span> の値ごとに改行せよ)．またこの結果をリダイレクトを用いてファイルとして記録し，gnuplotを用いてこのファイルのデータとgnuplotに組み込みの三角関数を共に図示せよ．なお三角関数 ( <code class="docutils literal notranslate"><span class="pre">math.sin</span></code> および <code class="docutils literal notranslate"><span class="pre">math.cos</span></code> )の引数はラジアン単位であることに注意せよ．</p>
<p>実行結果は例えば以下のようなものになる．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python kadai3.py
<span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">1</span>.0
<span class="m">10</span>.0 <span class="m">0</span>.17364817766693033 <span class="m">0</span>.984807753012208
... 省略 ...
<span class="m">170</span>.0 <span class="m">0</span>.17364817766693025 -0.9848077530122081
<span class="m">180</span>.0 <span class="m">1</span>.2246467991473532e-16 -1.0
</pre></div>
</td></tr></table></div>
<p>以下のようにリダイレクトでデータファイルを作成した場合には</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python kadai3.py &gt; data.dat
</pre></div>
</td></tr></table></div>
<p>gnuplotでは</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>&gt; plot   <span class="s1">&#39;data.dat&#39;</span> using <span class="m">1</span>:2 w lp, sin<span class="o">(</span>x/180*pi<span class="o">)</span>
&gt; replot <span class="s1">&#39;data.dat&#39;</span> using <span class="m">1</span>:3 w lp, cos<span class="o">(</span>x/180*pi<span class="o">)</span>
</pre></div>
</td></tr></table></div>
<p>などとして結果を確認すればよい．</p>
</div>
<div class="section" id="id18">
<h3><span class="section-number">3.6.4. </span>課題4<a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>標準入力から与えられた2つの整数<span class="math notranslate nohighlight">\(m, n \ge 1\)</span> の最大公約数を表示するプログラムを作成せよ．最大公約数を求めるには以下のアルゴリズム(ユークリッドの互除法)を用いるとよい．</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(m\)</span> を <span class="math notranslate nohighlight">\(n\)</span> で割った余り <span class="math notranslate nohighlight">\(r\)</span> を求める．</p></li>
<li><p>もし <span class="math notranslate nohighlight">\(r = 0\)</span> ならば <span class="math notranslate nohighlight">\(n\)</span> が最大公約数である．</p></li>
<li><p>もし <span class="math notranslate nohighlight">\(r \neq 0\)</span> ならば， <span class="math notranslate nohighlight">\(m\)</span> に <span class="math notranslate nohighlight">\(n\)</span> を， <span class="math notranslate nohighlight">\(n\)</span> に <span class="math notranslate nohighlight">\(r\)</span> を代入して[1]に戻る(繰り返す)．</p></li>
</ol>
</div></blockquote>
<p>実行結果は例えば以下のようなものになる．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python kadai4.py
Input m: <span class="m">12</span>    <span class="c1"># キーボード入力</span>
Input n: <span class="m">20</span>    <span class="c1"># キーボード入力</span>
Greatest common divisor of  <span class="m">12</span> and <span class="m">20</span>  :  <span class="m">4</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id19">
<h3><span class="section-number">3.6.5. </span>課題5<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の級数計算により自然対数の底 <span class="math notranslate nohighlight">\(e\)</span> の近似値を求めるプログラムを作成せよ．</p>
<div class="math notranslate nohighlight">
\[e \simeq \sum_{n=0}^{N} \frac{1}{n !}. \quad (0! = 1に注意せよ)\]</div>
<p>ただし以下の条件を満たすこと．</p>
<blockquote>
<div><ul class="simple">
<li><p>上式の <span class="math notranslate nohighlight">\(N\)</span> および許容誤差 <span class="math notranslate nohighlight">\(\epsilon\)</span> を標準入力から読み込む．</p></li>
<li><p><span class="math notranslate nohighlight">\(N &gt; 1\)</span> でない場合および <span class="math notranslate nohighlight">\(0 &lt; \epsilon &lt; 1\)</span> でない場合にはエラーメッセージを表示して終了する．</p></li>
<li><p>誤差が <span class="math notranslate nohighlight">\(\epsilon\)</span> 以下になった時点か， <span class="math notranslate nohighlight">\(n = N\)</span> まで計算した時点で級数計算を打ち切る．</p></li>
<li><p>最後に収束したかどうか，最終的な項数 <span class="math notranslate nohighlight">\(n\)</span> ，真値，近似値，相対誤差を表示して終了する．</p></li>
</ul>
</div></blockquote>
<p>実行結果は例えば以下のようなものになる．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python kadai5.py
Input N : <span class="m">10</span>
Input epsilon : <span class="m">1</span>.0e-8
Did not converge !
N                  :  <span class="m">10</span>
Exact value        :  <span class="m">2</span>.718281828459045
Approximated value :  <span class="m">2</span>.7182818011463845
Error              :  <span class="m">1</span>.0047766310211053e-08
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id20">
<h3><span class="section-number">3.6.6. </span>課題6<a class="headerlink" href="#id20" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>標準入力から文字列(英単語)を読み込み，それが <code class="docutils literal notranslate"><span class="pre">food</span></code>, <code class="docutils literal notranslate"><span class="pre">animal</span></code>, <code class="docutils literal notranslate"><span class="pre">vehicle</span></code>,  <code class="docutils literal notranslate"><span class="pre">others</span></code> ，のいずれかを判定し，表示するプログラムを作成せよ．ただし <code class="docutils literal notranslate"><span class="pre">exit</span></code> が入力されるまでプログラムは終了せず何度でも入力を受け付けるものとする．なお以下の英単語リスト以外のものは <code class="docutils literal notranslate"><span class="pre">others</span></code> と判断してよい:
<code class="docutils literal notranslate"><span class="pre">apple</span></code>, <code class="docutils literal notranslate"><span class="pre">orange</span></code>, <code class="docutils literal notranslate"><span class="pre">banana</span></code>, <code class="docutils literal notranslate"><span class="pre">dog</span></code>, <code class="docutils literal notranslate"><span class="pre">cat</span></code>, <code class="docutils literal notranslate"><span class="pre">lion</span></code>, <code class="docutils literal notranslate"><span class="pre">car</span></code>,
<code class="docutils literal notranslate"><span class="pre">airplane</span></code>, <code class="docutils literal notranslate"><span class="pre">motorcycle</span></code> ．</p>
<p>実行結果は例えば以下のようなものになる．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python kadai6.py
apple                <span class="c1"># キーボード入力</span>
--- apple is food
cat                  <span class="c1"># キーボード入力</span>
--- cat is animal
car                  <span class="c1"># キーボード入力</span>
--- car is vehicle
dog                  <span class="c1"># キーボード入力</span>
--- dog is animal
bike                 <span class="c1"># キーボード入力</span>
--- bike is others
<span class="nb">exit</span>                 <span class="c1"># キーボード入力</span>
Now <span class="nb">exit</span> program...
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id21">
<h3><span class="section-number">3.6.7. </span>課題7<a class="headerlink" href="#id21" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の漸化式</p>
<div class="math notranslate nohighlight">
\[p_{n+1} = p_n + \alpha p_n (1 - p_n)\]</div>
<p>で定義される数列 <span class="math notranslate nohighlight">\(p_n (n=0, 1, \ldots)\)</span> を考える．初期値 <span class="math notranslate nohighlight">\(p_0 = 0.9\)</span> から数列を生成し，そのうち <span class="math notranslate nohighlight">\(n=100, \ldots, 200\)</span> までを <span class="math notranslate nohighlight">\(\alpha\)</span> の関数として <span class="math notranslate nohighlight">\(1 &lt; \alpha &lt; 3\)</span> の範囲でプロットせよ． <span class="math notranslate nohighlight">\(\alpha\)</span> を <span class="math notranslate nohighlight">\(10^{-3}\)</span> 刻みで変えながらプロットすると結果は以下のようになるだろう．</p>
<div class="figure align-center" id="id42">
<a class="reference internal image-reference" href="_images/logistic.png"><img alt="_images/logistic.png" src="_images/logistic.png" style="width: 480px;" /></a>
<p class="caption"><span class="caption-text">ロジスティック写像</span><a class="headerlink" href="#id42" title="この画像へのパーマリンク">¶</a></p>
</div>
<p>このような写像はロジスティック写像と呼ばれ，非常に単純な式ながら一定の条件を満たすときにはカオスを生み出すことが知られている．</p>
</div>
<div class="section" id="id22">
<h3><span class="section-number">3.6.8. </span>課題8<a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>西暦(整数)を引数として受け取り，うるう年かどうか判定する関数を実装せよ．すなわち，うるう年であれば真( <code class="docutils literal notranslate"><span class="pre">True</span></code> )，そうでなければ偽( <code class="docutils literal notranslate"><span class="pre">False</span></code> )を返すものとする．ただしうるう年の判定条件は以下の通りである．</p>
<blockquote>
<div><ul class="simple">
<li><p>400で割り切れる年は無条件でうるう年である．</p></li>
<li><p>400で割り切れずに100で割り切れる年はうるう年ではない．</p></li>
<li><p>100で割り切れずに4で割り切れる年はうるう年である．</p></li>
</ul>
</div></blockquote>
<p>実行結果は例えば以下のようなものになる．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python test.py
Input year: <span class="m">2000</span>         <span class="c1"># 2000はキーボード入力</span>
<span class="m">2000</span> is leap year
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id23">
<h3><span class="section-number">3.6.9. </span>課題9<a class="headerlink" href="#id23" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>与えられた倍精度実数 <span class="math notranslate nohighlight">\(a (&gt; 0)\)</span> の平方根の近似値を返す関数を実装せよ．ただし平方根は以下のような逐次近似で計算する
ものとする．</p>
<div class="math notranslate nohighlight">
\[x_{n+1} = \frac{1}{2} \left( \frac{a}{x_{n}} + x_{n} \right)\]</div>
<p>ここで <span class="math notranslate nohighlight">\(x_{n}\)</span> は <span class="math notranslate nohighlight">\(\sqrt{a}\)</span> の <span class="math notranslate nohighlight">\(n\)</span> 番目の近似値である．初期値としては <span class="math notranslate nohighlight">\(x_{0} = a\)</span> を与え，反復は例えば <span class="math notranslate nohighlight">\(\epsilon = 10^{-5}\)</span> に対して， <span class="math notranslate nohighlight">\(\|x_{n+1} - x_{n}\| &lt; \epsilon \|x_{n}\|\)</span> となるまで繰り返せば良い．</p>
<p>実装した関数と組み込み関数 <code class="docutils literal notranslate"><span class="pre">sqrt</span></code> の結果を比較し， <span class="math notranslate nohighlight">\(\epsilon\)</span> で与えた精度の範囲内で正しいことを確認すること．</p>
<p>実行結果は例えば以下のようなものになる．</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python kadai9.py
<span class="m">2</span>.0                              <span class="c1"># キーボード入力</span>
sqrt<span class="o">(</span>x<span class="o">)</span> <span class="o">=</span>    <span class="m">1</span>.4142135623730951
<span class="nv">approx</span>  <span class="o">=</span>    <span class="m">1</span>.4142135623746899
</pre></div>
</td></tr></table></div>
<hr class="docutils" />
<dl class="footnote brackets">
<dt class="label" id="id24"><span class="brackets"><a class="fn-backref" href="#id3">1</a></span></dt>
<dd><p>巷で出くわすPythonのループは例えば</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>のように複雑怪奇なものが多いことに気がつくであろう．これはイテレータなるものを使って反復処理をもう少し一般的にしたものである．これは少しばかり高度な話題なのでまずは置いておくことにしよう．</p>
</dd>
<dt class="label" id="id25"><span class="brackets"><a class="fn-backref" href="#id5">2</a></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">else</span></code> 節という構文もあるが，それほど重要ではないのでここでは省略する．</p>
</dd>
<dt class="label" id="id26"><span class="brackets"><a class="fn-backref" href="#id9">3</a></span></dt>
<dd><p>引数を入力だけでなく出力として用いることも可能である．しかしこれには少し複雑な事情があるので，ここでは最も基本的な使い方である引数を入力とし返値を出力とする使い方をまずは覚えておこう．</p>
</dd>
<dt class="label" id="id27"><span class="brackets"><a class="fn-backref" href="#id11">4</a></span></dt>
<dd><p>これは「何でもない」ということを示すPythonに組み込みのオブジェクトである</p>
</dd>
<dt class="label" id="id28"><span class="brackets"><a class="fn-backref" href="#id13">5</a></span></dt>
<dd><p>厳密に言うともう少し複雑な振る舞いをするのだが，グローバル変数を使う際には明示的に <code class="docutils literal notranslate"><span class="pre">global</span></code> を付けておいた方が可読性の観点からよいので，このような記述にとどめた．</p>
</dd>
</dl>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="chap04.html" title="4. 対話型の実行方法"
             >次へ</a> |</li>
        <li class="right" >
          <a href="chap02.html" title="2. Pythonの基本"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FortranユーザーのためのPython入門</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Takanobu Amano.
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3 で生成しました。
    </div>
  </body>
</html>