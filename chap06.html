

<!doctype html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>6. NumPy配列の基本 &#8212; FortranユーザーのためのPython入門</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="prev" title="5. シーケンス型" href="chap05.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="chap05.html" title="5. シーケンス型"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FortranユーザーのためのPython入門</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">6. NumPy配列の基本</a><ul>
<li><a class="reference internal" href="#id2">6.1. NumPyについて</a></li>
<li><a class="reference internal" href="#id8">6.2. 基本的な使い方</a></li>
<li><a class="reference internal" href="#id11">6.3. 配列オブジェクト</a><ul>
<li><a class="reference internal" href="#id12">6.3.1. 属性</a></li>
<li><a class="reference internal" href="#id14">6.3.2. データ型</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id15">6.4. 生成</a><ul>
<li><a class="reference internal" href="#arange">6.4.1. arange</a></li>
<li><a class="reference internal" href="#zeros">6.4.2. zeros</a></li>
<li><a class="reference internal" href="#ones">6.4.3. ones</a></li>
<li><a class="reference internal" href="#linspace">6.4.4. linspace</a></li>
<li><a class="reference internal" href="#geomspace-logspace">6.4.5. geomspace / logspace</a></li>
<li><a class="reference internal" href="#id16">6.4.6. シーケンス型からの生成</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id17">6.5. 入出力</a><ul>
<li><a class="reference internal" href="#id18">6.5.1. テキスト入出力</a><ul>
<li><a class="reference internal" href="#loadtxt">6.5.1.1. loadtxt</a></li>
<li><a class="reference internal" href="#savetxt">6.5.1.2. savetxt</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id19">6.5.2. バイナリ入出力</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">6.6. 基本的な演算</a></li>
<li><a class="reference internal" href="#id21">6.7. インデックス操作</a></li>
<li><a class="reference internal" href="#id22">6.8. 形状操作</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="chap05.html"
                        title="前の章へ"><span class="section-number">5. </span>シーケンス型</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/chap06.rst.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="numpy">
<h1><a class="toc-backref" href="#id23"><span class="section-number">6. </span>NumPy配列の基本</a><a class="headerlink" href="#numpy" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>NumPyと呼ばれるライブラリの存在はPythonが広く科学技術計算に用いられるようになった最も大きな要因の一つであろう．ここでは科学技術計算で用いられる大規模データの効率的な扱いを可能にするNumPyの多次元配列オブジェクトについて学ぼう．なお，以降はこの多次元配列オブジェクトを便宜的にNumPy配列と呼ぶことにする．</p>
<blockquote>
<div><p>サンプルプログラム</p>
</div></blockquote>
<div class="contents topic" id="id1">
<p class="topic-title">この章の内容</p>
<ul class="simple">
<li><p><a class="reference internal" href="#numpy" id="id23">NumPy配列の基本</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id24">NumPyについて</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id25">基本的な使い方</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id26">配列オブジェクト</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id27">生成</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id28">入出力</a></p></li>
<li><p><a class="reference internal" href="#id20" id="id29">基本的な演算</a></p></li>
<li><p><a class="reference internal" href="#id21" id="id30">インデックス操作</a></p></li>
<li><p><a class="reference internal" href="#id22" id="id31">形状操作</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id24"><span class="section-number">6.1. </span>NumPyについて</a><a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="https://numpy.org/">NumPy</a> はPythonによる科学技術計算の根幹をなすライブラリである<a class="footnote-reference brackets" href="#numpylib" id="id4">1</a> ．このライブラリが提供する <code class="docutils literal notranslate"><span class="pre">numpy</span></code> というモジュール<a class="footnote-reference brackets" href="#module" id="id5">2</a> を使うためには</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</td></tr></table></div>
<p>のようにするのが一般的である．これは <code class="docutils literal notranslate"><span class="pre">numpy</span></code> という名前のモジュールを <code class="docutils literal notranslate"><span class="pre">import</span></code> し， <code class="docutils literal notranslate"><span class="pre">np</span></code> という別名を付けることを意味する．別名は必ずしもつけなくてもいいし，その別名を <code class="docutils literal notranslate"><span class="pre">np</span></code> にする必然性は何もない．しかし，世の中のほとんどのコードがこの書き方を採用しているので，ここでも慣例に従っておこう．以降では常に <code class="docutils literal notranslate"><span class="pre">np</span></code> が <code class="docutils literal notranslate"><span class="pre">numpy</span></code> モジュールを意味するものとする．</p>
<p>NumPy配列(NumPyが提供する多次元配列オブジェクト)は正確には <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> オブジェクトである<a class="footnote-reference brackets" href="#np-ndarray" id="id6">3</a>．一般にPythonはスクリプト言語に分類される動作の遅い言語であるが，NumPy配列を用いることで非常に高速な数値演算が可能である．これはNumPy配列がCで実装されており，NumPy配列の演算は「うまく」使えばほとんどが(内部的には)Cのコードとして実行されるからである．詳細は以下で追々見ていくことにし，ここでは一言だけ， <strong>Pythonで数値計算をする際にはforループは使ってはいけない</strong> と述べるにとどめておこう<a class="footnote-reference brackets" href="#dontusefor" id="id7">4</a> ．</p>
</div>
<div class="section" id="id8">
<h2><a class="toc-backref" href="#id25"><span class="section-number">6.2. </span>基本的な使い方</a><a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>まずは基礎の基礎を抑えよう．例えば配列を作る最も簡単な方法の一つとして</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span>
</pre></div>
</td></tr></table></div>
<p>のように <code class="docutils literal notranslate"><span class="pre">np.arange</span></code> を使う方法がある．<code class="docutils literal notranslate"><span class="pre">np.arange</span></code> の引数に配列の長さを指定することで連番の整数配列ができる．この例では10が指定されているので，長さ10の整数配列が生成されている．</p>
<p>次に <span class="math notranslate nohighlight">\(0 &lt; x &lt; 2\pi\)</span> の範囲を等間隔に <span class="math notranslate nohighlight">\(N\)</span> 分割し，その各点で <span class="math notranslate nohighlight">\(\cos(x)\)</span> を計算してみよう．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">N</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="o">/</span><span class="n">N</span> <span class="o">*</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>ここで整数の変数 <code class="docutils literal notranslate"><span class="pre">N</span></code> が配列のサイズである．2行目で配列 <code class="docutils literal notranslate"><span class="pre">x</span></code> を生成し，3行目でその配列の各要素について <span class="math notranslate nohighlight">\(\cos(x)\)</span> の値を計算している．</p>
<p>ここで2行目では <code class="docutils literal notranslate"><span class="pre">np.arange</span></code> で生成した配列に対してスカラー値の掛け算や割り算(整数 / 整数 = 実数に注意)を実行していることが分かるだろう( <code class="docutils literal notranslate"><span class="pre">np.pi</span></code> は <span class="math notranslate nohighlight">\(\pi\)</span> の値である)．このとき，配列の各要素に対して演算がそれぞれ実行される．同様に3行目では配列の各要素に対して <code class="docutils literal notranslate"><span class="pre">np.cos</span></code> の関数を呼び出し，結果として生成される新しい配列を <code class="docutils literal notranslate"><span class="pre">y</span></code> に代入している．このような使い方は <strong>Fortranの配列演算の使い方と全く同じ</strong> である．CやPythonの組み込みの配列<a class="footnote-reference brackets" href="#intrinsicarray" id="id9">6</a> では当然このような書き方は許されないが，NumPy配列はあたかもFortranの配列のように使えるのである．</p>
<p>このようにループを使わずに配列演算を記述できると確かに非常に便利であるが，NumPy配列の本当の利点は単に簡便さではなく，その演算速度にある．例えば <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">np.cos(x)</span></code> を(長さ <code class="docutils literal notranslate"><span class="pre">N</span></code> の配列 <code class="docutils literal notranslate"><span class="pre">x</span></code> および <code class="docutils literal notranslate"><span class="pre">y</span></code> が定義されているとして)Pythonのループを使って書くならば，</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
<p>のようになるだろう<a class="footnote-reference brackets" href="#numpymath" id="id10">5</a> ．ここでNumPy配列の各要素へのアクセスにはCのように <code class="docutils literal notranslate"><span class="pre">[]</span></code> を使って行うことに注意しよう．計算自体は同じことだが，このループはPythonで実行されるため，その演算速度は配列演算を使った場合に比べて桁違いに遅い．これは配列演算は実質的にはCで書かれたNumPyライブラリ内で実行されることになるためである．すなわち，Python上で実行される処理は遅いのだが，Pythonから呼び出した関数がCやFortranで実装されていれば，その部分についてはCやFortranで高速に処理することができるのである．</p>
<p>Pythonは様々なことが手軽に実現できる非常に便利な言語であるが，ネックとなるのはその処理の遅さである．(したがって，何も考えずに書くといとも簡単に遅いコードが出来上がってしまう．）NumPy配列を使うことで重たい処理だけを他の言語で書かれた高速なライブラリに押し付けることができ，手軽さと計算速度の速さを両立しているわけである．したがって， <strong>Pythonではループ処理をするのは可能な限り避け，可能な限り配列演算を利用するのが鉄則</strong> である．</p>
</div>
<div class="section" id="id11">
<h2><a class="toc-backref" href="#id26"><span class="section-number">6.3. </span>配列オブジェクト</a><a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>NumPy配列オブジェクト <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> は多次元配列データを格納し効率的な演算を実現する．</p>
<div class="section" id="id12">
<h3><span class="section-number">6.3.1. </span>属性<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>オブジェクトは一般に様々な属性(attribute)を持つ．NumPy配列の場合は当然ながら各要素をデータとして持つが，それに加えて以下のような属性が重要である．</p>
<p>dtype</p>
<blockquote>
<div><p>配列要素のデータ型(整数，実数，複素数など)</p>
</div></blockquote>
<p>ndim</p>
<blockquote>
<div><p>次元数</p>
</div></blockquote>
<p>size</p>
<blockquote>
<div><p>配列サイズ（要素数)</p>
</div></blockquote>
<p>shape</p>
<blockquote>
<div><p>配列形状</p>
</div></blockquote>
<p>これらの属性にアクセスするには <code class="docutils literal notranslate"><span class="pre">x.dtype</span></code> のように <code class="docutils literal notranslate"><span class="pre">.</span></code> を用いる．以下の例でこれらの意味を見てみよう． <code class="docutils literal notranslate"><span class="pre">np.arange</span></code> で生成された配列 <code class="docutils literal notranslate"><span class="pre">x</span></code> について見てみると，これは64bitの整数( <code class="docutils literal notranslate"><span class="pre">int64</span></code> )配列であり，次元数は1，は配列要素は10である．最後の形状は各次元の長さであるが，この場合は1次元配列なので <code class="docutils literal notranslate"><span class="pre">(10,)</span></code> となっている．例えば3次元配列で各次元の長さが 3, 4, 5 だったとすると <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">)</span></code> がその配列の形状となる<a class="footnote-reference brackets" href="#shapetuple" id="id13">7</a> ．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;int64&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">ndim</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">size</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(10,)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id14">
<h3><span class="section-number">6.3.2. </span>データ型<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>NumPy配列に格納されるデータ型( <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> 属性)はほとんどの場合はCやFortranの組み込み型と同等のものである．以下に代表的なNumPyのデータ型とそれに対応するCやFortranのデータ型を示す．</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>NumPy</p></th>
<th class="head"><p>型コード</p></th>
<th class="head"><p>C</p></th>
<th class="head"><p>Fortran</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">np.int32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'i4'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int32_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">integer(4)</span></code> / <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>32ビット整数(通常はCの <code class="docutils literal notranslate"><span class="pre">int</span></code> ，NumPyの <code class="docutils literal notranslate"><span class="pre">'i'</span></code> )</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">np.int64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'i8'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int64_t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">integer(8)</span></code></p></td>
<td><p>64ビット整数(通常はCの <code class="docutils literal notranslate"><span class="pre">long</span></code> ，NumPyの <code class="docutils literal notranslate"><span class="pre">'l'</span></code> )</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">np.uint32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'u4'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span></code></p></td>
<td></td>
<td><p>32ビット符号なし整数(通常はCの <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code> )</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">np.uint64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'u8'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uint64_t</span></code></p></td>
<td></td>
<td><p>64ビット符号なし整数(通常はCの <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span></code> )</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">np.float32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'f4'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">real(4)</span></code> / <code class="docutils literal notranslate"><span class="pre">real</span></code></p></td>
<td><p>32ビット浮動小数点数(通常はNumPyの <code class="docutils literal notranslate"><span class="pre">'f'</span></code> )</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">np.float64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'f8'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">real(8)</span></code></p></td>
<td><p>64ビット浮動小数点数(通常はNumPyの <code class="docutils literal notranslate"><span class="pre">'d'</span></code> ，Python組み込みの <code class="docutils literal notranslate"><span class="pre">float</span></code> )</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">np.complex64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'c8'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">complex</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">complex(4)</span></code> / <code class="docutils literal notranslate"><span class="pre">complex</span></code></p></td>
<td><p>実部・虚部が共に32ビット浮動小数点数の複素数</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">np.complex128</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'c16'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">double</span> <span class="pre">complex</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">complex(8)</span></code></p></td>
<td><p>実部・虚部が共に32ビット浮動小数点数の複素数(Python組み込みの <code class="docutils literal notranslate"><span class="pre">complex</span></code> )</p></td>
</tr>
</tbody>
</table>
<p>少し古いデータ型の指定方法では一文字の型コードが使われていた．例えば</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="go">dtype(&#39;float64&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">)</span>
<span class="go">dtype(&#39;int32&#39;)</span>
</pre></div>
</td></tr></table></div>
<p>の例では <code class="docutils literal notranslate"><span class="pre">'d'</span></code> は <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> ， <code class="docutils literal notranslate"><span class="pre">i</span></code> は <code class="docutils literal notranslate"><span class="pre">np.int32</span></code> に対応している．しかし，これは環境に依存して変わってしまう可能性がある(例えば <code class="docutils literal notranslate"><span class="pre">'i'</span></code> が 64ビット整数 <code class="docutils literal notranslate"><span class="pre">np.int64</span></code> の環境もあってもおかしくはない）ので，NumPyでは明示的にデータサイズを示した <code class="docutils literal notranslate"><span class="pre">np.int32</span></code> のような指定が推奨されている．</p>
</div>
</div>
<div class="section" id="id15">
<h2><a class="toc-backref" href="#id27"><span class="section-number">6.4. </span>生成</a><a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>配列を生成するにはいくつかの方法があるが，以下に何もないところから配列を作るための典型的な例をいくつか示そう．</p>
<div class="section" id="arange">
<h3><span class="section-number">6.4.1. </span>arange<a class="headerlink" href="#arange" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>すでに見たように <code class="docutils literal notranslate"><span class="pre">np.arange</span></code> は連番の配列を作る．いくつか別の使い方も見てみよう．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">array([10, 12, 14, 16, 18])</span>
</pre></div>
</td></tr></table></div>
<p>のように生成される配列の始点，終点，ステップを指定することもできる．指定の仕方は <code class="docutils literal notranslate"><span class="pre">for</span></code> ループでよく用いられる <code class="docutils literal notranslate"><span class="pre">range</span></code> と同様である．また，</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="go">array([0., 1., 2., 3., 4., 5., 6., 7., 8., 9.])</span>
</pre></div>
</td></tr></table></div>
<p>のように <code class="docutils literal notranslate"><span class="pre">dtype</span></code> を指定することで，生成される配列のデータ型を指定することもできる．</p>
</div>
<div class="section" id="zeros">
<h3><span class="section-number">6.4.2. </span>zeros<a class="headerlink" href="#zeros" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">np.zeros</span></code> は0で初期化された配列を作るための関数である．以下の例</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])</span>
</pre></div>
</td></tr></table></div>
<p>ではサイズが10の実数配列を生成している．デフォルトのデータ型が倍精度実数( <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> )であることに注意しよう．このデータ型は <code class="docutils literal notranslate"><span class="pre">dtype</span></code> オプションで指定することができる．</p>
<p>多次元の配列を生成するには，以下のように形状を指定すればよい．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="go">array([[0, 0, 0, 0],</span>
<span class="go">       [0, 0, 0, 0]], dtype=int32)</span>
</pre></div>
</td></tr></table></div>
<p>この例では形状として <code class="docutils literal notranslate"><span class="pre">(2,</span> <span class="pre">4)</span></code> を指定しているので0で初期化された2次元配列ができている．</p>
<p>さらに <code class="docutils literal notranslate"><span class="pre">np.zeros_like</span></code> を使うと，既に存在する別の配列と同じ形状・同じデータ型の配列を生成することもできる．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([[0., 0., 0.],</span>
<span class="go">       [0., 0., 0.],</span>
<span class="go">       [0., 0., 0.]], dtype=float32)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="ones">
<h3><span class="section-number">6.4.3. </span>ones<a class="headerlink" href="#ones" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">np.ones</span></code> は1で初期化する以外は <code class="docutils literal notranslate"><span class="pre">np.zeros</span></code> と同じように使うことができる．例えば以下は2次元の配列を生成する．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="go">array([[1., 1., 1.],</span>
<span class="go">       [1., 1., 1.],</span>
<span class="go">       [1., 1., 1.]])</span>
</pre></div>
</td></tr></table></div>
<p>ここでもデフォルトのデータ型が倍精度実数であることに注意しよう．</p>
<p>同様に <code class="docutils literal notranslate"><span class="pre">np.ones_like</span></code> も <code class="docutils literal notranslate"><span class="pre">np.zeros_like</span></code> の代わりに使うことができる．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([[1., 1., 1.],</span>
<span class="go">       [1., 1., 1.],</span>
<span class="go">       [1., 1., 1.]], dtype=float32)</span>
</pre></div>
</td></tr></table></div>
<p>この例のように引数で与えられた配列の形状およびデータ型だけを受け継ぎ，その値は1で初期化されていることに注意しよう．</p>
</div>
<div class="section" id="linspace">
<h3><span class="section-number">6.4.4. </span>linspace<a class="headerlink" href="#linspace" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ある区間を均等に区切った点列を配列として作成したいときに便利なのが <code class="docutils literal notranslate"><span class="pre">np.linspace</span></code> である．例えば <span class="math notranslate nohighlight">\(0 \leq x \leq 1\)</span> を均等に区切った配列を生成してみよう．</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="go">array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1. ])</span>
</pre></div>
</td></tr></table></div>
<p>ここで <code class="docutils literal notranslate"><span class="pre">np.linspace</span></code> がデフォルトで端点(この場合は <span class="math notranslate nohighlight">\(x = 0\)</span> と <span class="math notranslate nohighlight">\(x = 1\)</span> )を含むことに注意しよう． <span class="math notranslate nohighlight">\(x = 1\)</span> を含まなくても良いのであれば <code class="docutils literal notranslate"><span class="pre">np.arange</span></code> を用いて</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span>
<span class="go">array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9])</span>
</pre></div>
</td></tr></table></div>
<p>としてもよい．</p>
</div>
<div class="section" id="geomspace-logspace">
<h3><span class="section-number">6.4.5. </span>geomspace / logspace<a class="headerlink" href="#geomspace-logspace" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>To be written.</p>
</div>
<div class="section" id="id16">
<h3><span class="section-number">6.4.6. </span>シーケンス型からの生成<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>To be written.</p>
</div>
</div>
<div class="section" id="id17">
<h2><a class="toc-backref" href="#id28"><span class="section-number">6.5. </span>入出力</a><a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>NumPyは配列の入出力用に便利な関数が用意されており，非常に簡単に使うことができる．</p>
<div class="section" id="id18">
<h3><span class="section-number">6.5.1. </span>テキスト入出力<a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="loadtxt">
<h4><span class="section-number">6.5.1.1. </span>loadtxt<a class="headerlink" href="#loadtxt" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>いわゆるCSV(comma-separated values)ファイルを読み込むには <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> が大変便利である．</p>
</div>
<div class="section" id="savetxt">
<h4><span class="section-number">6.5.1.2. </span>savetxt<a class="headerlink" href="#savetxt" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> の逆にCSV形式で配列をファイルに出力する．</p>
</div>
</div>
<div class="section" id="id19">
<h3><span class="section-number">6.5.2. </span>バイナリ入出力<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>To be written.</p>
</div>
</div>
<div class="section" id="id20">
<h2><a class="toc-backref" href="#id29"><span class="section-number">6.6. </span>基本的な演算</a><a class="headerlink" href="#id20" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>To be written.</p>
</div>
<div class="section" id="id21">
<h2><a class="toc-backref" href="#id30"><span class="section-number">6.7. </span>インデックス操作</a><a class="headerlink" href="#id21" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>To be written.</p>
</div>
<div class="section" id="id22">
<h2><a class="toc-backref" href="#id31"><span class="section-number">6.8. </span>形状操作</a><a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>To be written.</p>
<hr class="docutils" />
<dl class="footnote brackets">
<dt class="label" id="numpylib"><span class="brackets"><a class="fn-backref" href="#id4">1</a></span></dt>
<dd><p>これはPythonに組み込みのライブラリではないので別途インストールする必要があるが，ほとんどの環境には入っていると思われるのでここではあるものとして考える．</p>
</dd>
<dt class="label" id="module"><span class="brackets"><a class="fn-backref" href="#id5">2</a></span></dt>
<dd><p>ここではモジュールが何なのかについてはあえて触れない．これを知らなくてもNumPy配列は十分に使いこなすことができる．</p>
</dd>
<dt class="label" id="np-ndarray"><span class="brackets"><a class="fn-backref" href="#id6">3</a></span></dt>
<dd><p>正確にはクラス <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> のインスタンスと呼ぶべきかもしれないが，ここでは細かいことは置いておこう．</p>
</dd>
<dt class="label" id="dontusefor"><span class="brackets"><a class="fn-backref" href="#id7">4</a></span></dt>
<dd><p>もちろんこれは誇張なわけだが，この考え方は非常に重要である．ほとんどの場合はループを使わずに書くことができ，これによって飛躍的に高速な実行が可能となるからである．</p>
</dd>
<dt class="label" id="numpymath"><span class="brackets"><a class="fn-backref" href="#id10">5</a></span></dt>
<dd><p>このようにNumPyの数学関数はスカラーに対してもNumPy配列に対しても有効である．さらに，標準の <code class="docutils literal notranslate"><span class="pre">math</span></code> モジュールよりも多くの数学関数が用意されているので，特に理由がない限りは常にNumPyの数学関数を用いるのが簡単であろう．</p>
</dd>
<dt class="label" id="intrinsicarray"><span class="brackets"><a class="fn-backref" href="#id9">6</a></span></dt>
<dd><p>Pythonにも配列を提供する <code class="docutils literal notranslate"><span class="pre">array</span></code> という組み込みのモジュールがあるのだが，NumPy配列があまりにも便利で普及しているのでそれほどお目にかかることはないだろう．</p>
</dd>
<dt class="label" id="shapetuple"><span class="brackets"><a class="fn-backref" href="#id13">7</a></span></dt>
<dd><p>配列の形状はタプル(tuple)というオブジェクトとして表されている．タプルは簡単に言うと変更できない配列のようなものである．</p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="chap05.html" title="5. シーケンス型"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FortranユーザーのためのPython入門</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Takanobu Amano.
      このドキュメントは <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3 で生成しました。
    </div>
  </body>
</html>